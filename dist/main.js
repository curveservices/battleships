(()=>{"use strict";const t=class{constructor(t,e){this.name=t,this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits+=1,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}};(()=>{const n=document.getElementById("gamesboard-container"),o=document.querySelector(".option-container"),s=document.getElementById("flip-button"),r=document.getElementById("start-button"),i=document.getElementById("info"),c=document.getElementById("turn-display");let a=0;function l(){const t=Array.from(o.children);a=0===a?90:0,t.forEach((t=>t.style.transform=`rotate(${a}deg)`))}s.addEventListener("click",l),l();const d=10;function u(t,e){const o=document.createElement("div");o.classList.add("game-board"),o.style.background=t,o.id=e;for(let t=0;t<d*d;t++){const e=document.createElement("div");e.classList.add("block"),e.id=t,o.append(e)}n.append(o)}u("#0077be","player"),u("seagreen","computer");const h=[new t("destroyer",2),new t("submarine",3),new t("cruiser",3),new t("battleship",4),new t("carrier",5)];let m,f;function p(t,e,n,o){let s,r=e?n<=d*d-o.length?n:d*d-o.length:n<=d*d-d*o.length?n:n-o.length*d+d,i=[];for(let n=0;n<o.length;n++)e?i.push(t[Number(r)+n]):i.push(t[Number(r)+n*d]);e?i.every(((t,e)=>s=i[0].id%d!=d-(i.length-(e+1)))):i.every(((t,e)=>s=i[0].id<d*e+1+90));const c=i.every((t=>!t.classList.contains("taken")));return{shipBlocks:i,valid:s,notTaken:c}}function y(t,e,n){const o=document.querySelectorAll(`#${t} div`);let s=Math.random()<.5,r="player"===t?0===a:s,i=Math.floor(Math.random()*d*d),c=n||i;const{shipBlocks:l,valid:u,notTaken:h}=p(o,r,c,e);u&&h?l.forEach((t=>{t.classList.add(e.name),t.classList.add("taken")})):("computer"===t&&y(t,e,n),"player"===t&&(m=!0))}function g(t){m=!1,f=t.target}function v(t){t.preventDefault();const e=h[f.id];!function(t,e){const n=document.querySelectorAll("#player div");let o=0===a;const{shipBlocks:s,valid:r,notTaken:i}=p(n,o,t,e);r&&i&&s.forEach((t=>{t.classList.add("hover"),setTimeout((()=>t.classList.remove("hover")),500)}))}(t.target.id,e)}function k(t){const e=t.target.id;y("player",h[f.id],e),m||f.remove()}h.forEach((t=>y("computer",t))),Array.from(o.children).forEach((t=>t.addEventListener("dragstart",g))),document.querySelectorAll("#player div").forEach((t=>{t.addEventListener("dragover",v),t.addEventListener("drop",k)}));let L,E=!1;r.addEventListener("click",(function(){0!=o.children.length?i.textContent="Please place all of your ships!":document.querySelectorAll("#computer div").forEach((t=>t.addEventListener("click",C)))}));let b=[],A=[];function C(t){if(!E){if(t.target.classList.contains("taken")){t.target.classList.add("boom"),i.textContent="You hit the computers ship!";let e=Array.from(t.target.classList);e=e.filter((t=>"block"!==t)),e=e.filter((t=>"boom"!==t)),e=e.filter((t=>"taken"!==t)),b.push(...e)}t.target.classList.contains("empty")||(i.textContent="Nothing hit this time",t.target.classList.add("empty")),L=!1,document.querySelectorAll("#computer div").forEach((t=>t.replaceWith(t.cloneNode(!0)))),setTimeout(x,3e3)}}function x(){E||(c.textContent=" Computers Go!",i.textContent="The computer is thinking...",setTimeout((()=>{let t=Math.floor(Math.random()*d*d);const n=document.querySelectorAll("#player div");if(n[t].classList.contains("taken")&&n[t].classList.contains("boom"))x();else if(n[t].classList.contains("taken")&&!n[t].classList.contains("boom")){n[t].classList.add("boom"),i.textContent="The computer hit your ship";let o=Array.from(e.target.classList);o=o.filter((t=>"block"!==t)),o=o.filter((t=>"boom"!==t)),o=o.filter((t=>"taken"!==t)),A.push(...o)}else i.textContent="Nothing hit this time",n[t].classList.add("empty")}),3e3),setTimeout((()=>{L=!0,c.textContent="Your Go!",i.textContent="Please take your go.",document.querySelectorAll("#computer div").forEach((t=>t.addEventListener("click",C)))}),6e3))}})(),console.log("Hello world")})();